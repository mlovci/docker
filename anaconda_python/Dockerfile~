FROM mlovci:base

MAINTAINER Michael Lovci <michaeltlovci@gmail.com>

USER flotilla

WORKDIR /home/flotilla/software

ADD http://repo.continuum.io/miniconda/Miniconda-3.7.0-Linux-x86_64.sh software/

RUN chmod u+x Miniconda-3.7.0-Linux-x86_64.sh && ./Miniconda-3.7.0-Linux-x86_64.sh -b -p /usr/local/miniconda -f
ENV PATH /usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/local/miniconda/bin  
RUN conda install --yes cython numpy scipy scikit-learn pip pandas ipython jinja2 tornado pyzmq matplotlib pyqt
RUN pip install patsy && pip install seaborn brewer2mpl networkx semantic_version statsmodels flotilla htseq misopy pybedtools gffutils cutadapt

WORKDIR /home/flotilla/ipython
EXPOSE 8888

ENTRYPOINT ["ipython", "notebook", "--no-browser"]